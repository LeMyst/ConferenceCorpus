#!/bin/bash
# WF 2020-08-21
# Crawl WikiCFP and save to JSON
python3 --version
export PYTHONPATH="."
target=$HOME/.conferencecorpus/wikicfp/crawl
if [ ! -d $target ]
then
   mkdir -p $target
fi
#for base in {0..13..1}
for base in {0..13..1}
do
  baseDone="True"
  for i in {0..9..1}
  do
    startId=$((base*10000+i*1000))
    stopId=$((base*10000+i*1000+999))
    jsonFile=$(printf "wikicfp_Event%06d-%06d.json" $startId $stopId)
    if [ -f $target/$jsonFile ]
    then
      echo "$jsonFile ✅"
    else
      echo "$jsonFile ❌"
      baseDone="False"
    fi
  done
  if [ "$baseDone" = "False" ]
  then
    python3 datasources/wikicfpscrape.py --startId ${base}0000 --stopId ${base}9999 -t 10 --targetPath $target
  fi
done
